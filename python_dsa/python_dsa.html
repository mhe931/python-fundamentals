<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Python DSA</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Fira+Code:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #4caf50;
            --primary-dark: #3e8e41;
            --background: #121212;
            --surface: #1e1e1e;
            --text: #e0e0e0;
            --text-secondary: #b0b0b0;
        }
        body {
            font-family: 'Roboto', sans-serif;
            background-color: var(--background);
            color: var(--text);
            margin: 0;
        }
        .slide-content {
            max-height: 65vh;
            overflow-y: auto;
        }
        /* Custom scrollbar for webkit browsers */
        .slide-content::-webkit-scrollbar {
            width: 8px;
        }
        .slide-content::-webkit-scrollbar-track {
            background: var(--surface);
        }
        .slide-content::-webkit-scrollbar-thumb {
            background-color: var(--primary-dark);
            border-radius: 10px;
            border: 2px solid var(--surface);
        }
        pre {
            font-family: 'Fira Code', monospace;
        }
    </style>
</head>
<body class="flex flex-col h-screen">

    <header id="presentation-header" class="p-4 bg-gray-800 shadow-lg transition-all duration-500">
        <h1 class="text-2xl md:text-3xl font-bold text-center text-green-400">Python DSA</h1>
    </header>

    <main id="root" class="flex-grow"></main>

    <!-- React and ReactDOM CDNs -->
    <script src="https://unpkg.com/react@17/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.production.min.js"></script>
    <!-- Babel CDN for JSX transformation -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        const sectionsData = {
            'dsa-lists-arrays': {
                title: 'Lists and Arrays',
                slides: [
                    { type: 'content', title: 'Python Lists', content: 'Python\'s built-in list type is a dynamic array, meaning it can grow and shrink. It\'s one of the most versatile and commonly used data structures in Python.' },
                    { type: 'tips', title: 'Tips & Tricks', tips: ['List comprehensions provide a concise way to create lists.', 'Python\'s `array` module can be used for more memory-efficient storage of basic types like integers or floats.'] },
                    { type: 'fun-facts', title: 'Fun Facts', facts: ['Under the hood, Python lists are implemented as arrays of pointers to objects, which is why they can hold items of different data types.'] }
                ]
            },
            'dsa-stacks': {
                title: 'Stacks',
                slides: [
                    { type: 'content', title: 'What is a Stack?', content: 'A stack is a Last-In, First-Out (LIFO) data structure. The last element added to the stack will be the first one to be removed. Think of a stack of plates.' },
                    { type: 'code', title: 'Implementing a Stack with a List', code: 'stack = []\n\n# Push (add) items\nstack.append("A")\nstack.append("B")\n\n# Pop (remove) item\nitem = stack.pop() # returns "B"' },
                    { type: 'tips', title: 'Tips & Tricks', tips: ['Python lists make implementing a stack trivial with `append()` for push and `pop()` for pop.', 'Stacks are used for managing function calls (the call stack), undo/redo functionality, and parsing expressions.'] },
                    { type: 'fun-facts', title: 'Fun Facts', facts: ['A "stack overflow" error occurs when the call stack runs out of space, often due to excessively deep or infinite recursion.'] }
                ]
            },
            'dsa-queues': {
                title: 'Queues',
                slides: [
                    { type: 'content', title: 'What is a Queue?', content: 'A queue is a First-In, First-Out (FIFO) data structure. The first element added to the queue will be the first one to be removed. Think of a checkout line at a store.' },
                    { type: 'code', title: 'Implementing a Queue with `collections.deque`', code: 'from collections import deque\n\nqueue = deque()\n\n# Enqueue (add) items\nqueue.append("A")\nqueue.append("B")\n\n# Dequeue (remove) item\nitem = queue.popleft() # returns "A"' },
                    { type: 'tips', title: 'Tips & Tricks', tips: ['Using a standard list for a queue is inefficient because removing from the beginning (`pop(0)`) is slow (O(n)). Always use `collections.deque` for queues.'] },
                    { type: 'fun-facts', title: 'Fun Facts', facts: ['Queues are widely used in computer science for things like CPU scheduling, print job spooling, and breadth-first search in graphs.'] }
                ]
            }
        };

        const Slide = ({ slide }) => {
            switch (slide.type) {
                case 'code':
                    return (
                        <div>
                            <h3 className="text-xl md:text-2xl font-semibold mb-4 text-green-300">{slide.title}</h3>
                            <pre className="bg-gray-900 text-white p-4 rounded-lg text-sm md:text-base"><code>{slide.code}</code></pre>
                        </div>
                    );
                case 'tips':
                    return (
                        <div>
                            <h3 className="text-xl md:text-2xl font-semibold mb-4 text-yellow-300"><i className="fas fa-lightbulb mr-2"></i>{slide.title}</h3>
                            <ul className="list-disc list-inside space-y-2 text-base md:text-lg">
                                {slide.tips.map((tip, i) => <li key={i}>{tip}</li>)}
                            </ul>
                        </div>
                    );
                case 'fun-facts':
                     return (
                        <div>
                            <h3 className="text-xl md:text-2xl font-semibold mb-4 text-cyan-300"><i className="fas fa-star mr-2"></i>{slide.title}</h3>
                            <ul className="list-disc list-inside space-y-2 text-base md:text-lg">
                                {slide.facts.map((fact, i) => <li key={i}>{fact}</li>)}
                            </ul>
                        </div>
                    );
                default:
                    return (
                        <div>
                            <h3 className="text-xl md:text-2xl font-semibold mb-4 text-green-300">{slide.title}</h3>
                            <p className="text-base md:text-lg text-gray-300" dangerouslySetInnerHTML={{ __html: slide.content }}></p>
                        </div>
                    );
            }
        };

        const App = () => {
            const [currentTopicId, setCurrentTopicId] = useState('');
            const [currentSlideIndex, setCurrentSlideIndex] = useState(0);

            const sectionOrder = useMemo(() => Object.keys(sectionsData), []);

            useEffect(() => {
                const handleHashChange = () => {
                    const hash = window.location.hash.substring(1); // Remove '#'
                    const topic = sectionsData[hash] ? hash : sectionOrder[0];
                    setCurrentTopicId(topic);
                    setCurrentSlideIndex(0); // Reset to first slide on topic change
                };

                window.addEventListener('hashchange', handleHashChange);
                handleHashChange(); // Initial load

                return () => window.removeEventListener('hashchange', handleHashChange);
            }, [sectionOrder]);

            useEffect(() => {
                const handleKeyDown = (event) => {
                    if (event.key === 'ArrowRight') handleNext();
                    else if (event.key === 'ArrowLeft') handlePrev();
                };
                window.addEventListener('keydown', handleKeyDown);
                return () => window.removeEventListener('keydown', handleKeyDown);
            }, [currentTopicId, currentSlideIndex]);

            // Hide header on down-level slides
            useEffect(() => {
                const header = document.getElementById('presentation-header');
                if (header) {
                    if (currentSlideIndex > 0) {
                        header.style.maxHeight = '0';
                        header.style.padding = '0';
                        header.style.opacity = '0';
                        header.style.overflow = 'hidden';
                    } else {
                        header.style.maxHeight = '100px'; // or original height
                        header.style.padding = '1rem'; // or original padding
                        header.style.opacity = '1';
                    }
                }
            }, [currentSlideIndex]);

            const currentSection = sectionsData[currentTopicId];
            if (!currentSection) {
                return <div className="p-8 text-center text-xl">Topic not found. Please check the URL hash.</div>;
            }

            const currentSlides = currentSection.slides;
            const currentTopicIndex = sectionOrder.indexOf(currentTopicId);

            const handleNext = () => {
                if (currentSlideIndex < currentSlides.length - 1) {
                    setCurrentSlideIndex(prev => prev + 1);
                } else if (currentTopicIndex < sectionOrder.length - 1) {
                    // Go to next topic
                    window.location.hash = sectionOrder[currentTopicIndex + 1];
                }
            };

            const handlePrev = () => {
                if (currentSlideIndex > 0) {
                    setCurrentSlideIndex(prev => prev - 1);
                } else if (currentTopicIndex > 0) {
                    // Go to the start of the previous topic.
                    window.location.hash = sectionOrder[currentTopicIndex - 1];
                }
            };

            const isFirstSlideOverall = currentTopicIndex === 0 && currentSlideIndex === 0;
            const isLastSlideOverall = currentTopicIndex === sectionOrder.length - 1 && currentSlideIndex === currentSlides.length - 1;

            return (
                <div className="flex flex-col h-full p-4 md:p-8 bg-gray-900">
                    <div className="flex-grow flex flex-col justify-center items-center">
                        <div className="w-full max-w-4xl bg-gray-800 rounded-xl shadow-2xl p-6 md:p-8">
                            <h2 className="text-2xl md:text-3xl font-bold mb-2 text-white">{currentSection.title}</h2>
                            <div className="text-sm text-gray-400 mb-6">
                                Slide {currentSlideIndex + 1} of {currentSlides.length}
                            </div>
                            <div className="slide-content pr-2">
                                {currentSlides[currentSlideIndex] && <Slide slide={currentSlides[currentSlideIndex]} />}
                            </div>
                        </div>
                    </div>

                    <div className="flex justify-center items-center gap-4 mt-6">
                        <button
                            onClick={handlePrev}
                            disabled={isFirstSlideOverall}
                            className="px-6 py-2 bg-green-600 text-white font-semibold rounded-full shadow-md hover:bg-green-700 disabled:bg-gray-500 disabled:cursor-not-allowed transition-colors"
                        >
                            <i className="fas fa-arrow-left mr-2"></i> Prev
                        </button>
                        <div className="text-gray-400">
                            Topic {currentTopicIndex + 1} / {sectionOrder.length}
                        </div>
                        <button
                            onClick={handleNext}
                            disabled={isLastSlideOverall}
                            className="px-6 py-2 bg-green-600 text-white font-semibold rounded-full shadow-md hover:bg-green-700 disabled:bg-gray-500 disabled:cursor-not-allowed transition-colors"
                        >
                            Next <i className="fas fa-arrow-right ml-2"></i>
                        </button>
                    </div>
                </div>
            );
        };

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>